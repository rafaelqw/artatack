import { Filter, OrderBy, Document } from './database';
import { Model, Field, SimpleField } from './model';
import { Dialect } from './engine';
export interface AliasEntry {
    name: string;
    model: Model;
}
export interface SelectQuery {
    fields: string;
    tables: string;
    where?: string;
    orderBy?: string;
}
export declare class Context {
    private counter;
    aliasMap: {
        [key: string]: AliasEntry;
    };
    constructor();
    getAlias(builder: QueryBuilder): string;
}
export declare class QueryBuilder {
    model: Model;
    field?: Field;
    parent?: QueryBuilder;
    dialect: Dialect;
    context?: Context;
    alias?: string;
    froms?: string[];
    fieldMap: {};
    getFroms(): string[];
    constructor(model: Model | QueryBuilder, dialect: Dialect | Field);
    where(args: Filter): string;
    private or(args);
    private and(args);
    private expr(field, operator, value);
    _extendFilter(filter: Filter, orderBy: OrderBy): Filter;
    _pushField(fields: string[], path: string): string;
    _select(name: string | SimpleField | Document, filter?: Filter, orderBy?: OrderBy): SelectQuery;
    select(name: string | SimpleField | Document, filter?: Filter, orderBy?: OrderBy, filterThunk?: (QueryBuilder) => string): string;
    column(): string;
    encodeField(name: string | SimpleField): string;
    private _join(field, args);
    private _in(field, args);
    private exists(field, operator, args);
    private escape(field, value);
    private escapeId(name);
}
export declare function encodeFilter(args: Filter, model: Model, escape: Dialect): string;
export declare const AND = "and";
export declare const OR = "or";
export declare const NOT = "not";
export declare const LT = "lt";
export declare const LE = "le";
export declare const GE = "ge";
export declare const GT = "gt";
export declare const NE = "ne";
export declare const IN = "in";
export declare const LIKE = "like";
export declare const NULL = "null";
export declare const SOME = "some";
export declare const NONE = "none";
export declare function splitKey(arg: string): string[];
